MyQRCode:
  title: "My QR Code"
  init:
    - ..avatar.docAPI.get
    - actionType: evalObject
      object:
        - ..avatar.showdocument@: =..avatar.docResponse.doc.0
    - actionType: evalObject
      object:
        - =.builtIn.utils.prepareDoc:
            dataIn:
              doc: =..avatar.showdocument
            dataOut: MyQRCode.avatar.showdocument
    - actionType: evalObject
      object:
        - ..avatar.url@: =..avatar.showdocument.name.data
        - .Global.avatarUrl@: =..avatar.showdocument.name.data
    - actionType: evalObject
      object:
        - =.builtIn.string.concat:
            dataIn:
              - "https://api.qrserver.com/v1/create-qr-code/?size=100x100&data="
              - "{userName: "
              - =.profile.docResponse.doc.0.name.data.userName
              - ",id:"
              - =.Global.currentUser.vertex.id
              - ",uid:"
              - =.Global.currentUser.vertex.uid
              - "}"
            dataOut: MyQRCode.imagepath
    - ..profile.docAPI.get
    - if:
        - =..profile.docResponse.doc.0.id
        - actionType: evalObject
          object:
            - =.builtIn.string.concat:
                dataIn:
                  - =..profile.docResponse.doc.0.name.data.firstName
                  - " "
                  - =..profile.docResponse.doc.0.name.data.lastName
                dataOut: MyQRCode.name
        - actionType: evalObject
          object:
            - .MyQRCode.name@: ""
  name: " "
  imagepath: ""
  avatar:
    url: ava.png
    showdocument:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.UserAvatar
      name:
        title: ""
        type: ..avatar.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.UserAvatar
      name:
        title: ""
        type: ..avatar.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    docResponse:
      doc:
        - type: .DocType.UserAvatar
          eid: .Global.rootNotebookID
          name: ""
      error: ""
      jwt: ""
    docAPI:
      get:
        .DocAPI.get: ""
        id: .Global.rootNotebookID
        xfname: eid
        type: .DocType.UserAvatar
        dataKey: avatar.docResponse
        _nonce: .Global._nonce
        maxcount: "1"
        obfname: "mtime"
  profile:
    docResponse: ""
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        id: .Global.rootNotebookID
        xfname: eid
        type: .DocType.DoctorProfile
        dataKey: profile.docResponse
        _nonce: =.Global._nonce
  components:
    - .BaseHeader: null
    - .HeaderLeftButton:

        null
        # - .HeaderRightButton:
        #   onClick:
        #     - actionType: popUp
        #       popUpView: SendLinkTag
        #   children:
        #     - type: image
        #       path: link.png
        #       style: 
        #         left: "0.08"
        #         top: "0.04"
        #         height: "0.02"
        #         zIndex: 100
    - type: view
      style:
        top: "0.15"
        width: "1"
        height: "0.8"
      children:
        - type: view
          style:
            marginTop: "0.01"
            width: "0.9"
            left: "0.05"
            height: "0.6"
            backgroundColor: "0xF0F0F0"
            borderRadius: "5"
          children:
            - type: image
              path:
                emit:
                  actions:
                    - if:
                        - =..avatar.showdocument.name.data
                        - ..avatar.url
                        - ava.png
              style:
                marginTop: "0.02"
                top: "0"
                left: "0.05"
                height: "0.08"
            - type: label
              dataKey: MyQRCode.name #Global.currentUser.vertex.name.userName
              style:
                left: "0.25"
                marginTop: "0.02"
                fontWeight: "650"
                height: "0.08"
                top: "0"
                fontFamily: "Poppins"
                fontSize: "16"
                textAlign:
                  y: center

            - type: image
              path: .MyQRCode.imagepath
              style:
                top: "0.14"
                width: "0.6"
                left: "0.15"
            - type: label
              text: "Scan the QR code to add me on AiTmeet"
              style:
                top: "0.7"
                width: "0.9"
                height: "0.05"
                left: "0"
                textAlign:
                  x: center
